<main class='container hero'>
  <div class='hook'>
    <h1 class='gold-animated'>CivMods</h1>
    <p>The Civilization VII Mod Manager</p>
    <p>
      Discover, Install, Play. Easily browse, install, and manage Civ 7 mods
      with just a few clicks â€” no hassle, just strategy.
    </p>
  </div>
</main>
<section class="container detect-platform">
  {{#if release}}
  <div>
    <div class='downloads'>
      <div id="download-windows" class="download-card" data-platform="windows">
        <a href="{{release.downloads.windows}}" role="button">
          {{{icon 'filled/brand-windows' 24}}}
          Download for Windows
        </a>
      </div>
      <div id="download-macos_universal" class="download-card" data-platform="macos">
        <a href="{{release.downloads.macos_universal}}" role="button">
          {{{icon 'outline/brand-finder' 24}}}
          Download for macOS <small>(Universal)</small>
        </a>
      </div>
      <div id="download-linux" class="download-card" data-platform="linux">
        <a href="{{release.downloads.linux}}" role="button">
          {{{icon 'outline/brand-ubuntu' 32}}}
          Download for Linux
        </a>
      </div>
    </div>
    <div class="downloads-help">
      <a href="#" id="show-downloads">
        Download for another platform
      </a>
    </div>
    <div class="downloads-other-platform" id="show-downloads-list">
      <a href="{{release.downloads.windows}}">
        Windows
      </a>
      <a href="{{release.downloads.macos_universal}}">
        macOS (Universal)
      </a>
      <a href="{{release.downloads.linux}}">
        Linux
      </a>
    </div>
  </div>
  {{/if}}
</section>
<section class='container'>
  <div class="screen">
    <img src="/static/screen-background.png" alt="CivMods screenshot showing list of mods">
  </div>
</section>

{{#section 'scripts'}}
<script>
  const platformLower = navigator.platform.toLowerCase();
  const platform = platformLower.includes('win') ? 'windows' :
    platformLower.includes('mac') ? 'macos' :
      platformLower.includes('linux') ? 'linux' : 'unknown';

  const showDownloadsList = document.getElementById('show-downloads-list');
  if (showDownloadsList) {
    showDownloadsList.style.display = 'none';

    document.getElementById('show-downloads').addEventListener('click', (e) => {
      e.preventDefault();
      showDownloadsList.style.display = 'block';
    });

    // Hide download buttons for unsupported platforms
    document.querySelectorAll('.download-card').forEach(card => {
      if (card.dataset.platform === platform || platform === 'unknown') {
        card.classList.add('active');
      }
    });
  }
</script>
{{/section}}